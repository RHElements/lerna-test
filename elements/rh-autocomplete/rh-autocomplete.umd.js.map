{"version":3,"file":"rh-autocomplete.umd.js","sources":["rh-autocomplete.umd.js"],"sourcesContent":["/*\n * Copyright 2018 Red Hat, Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport RHElement from \"../rhelement/rhelement.umd.js\";\n\nconst KEYCODE = {\n  ENTER: 13,\n  DOWN: 40,\n  UP: 38,\n  ESC: 27\n};\n\n// use this variable to debounce api call when user types very fast\nlet throttle = false;\n\nclass RhAutocomplete extends RHElement {\n  get html() {\n    return `\n<style>\n:host {\n  display: block; }\n</style>\n<rh-search-box id=\"input-box\"></rh-search-box>\n<rh-search-droplist id=\"dropdown\"></rh-search-droplist>`;\n  }\n\n  static get tag() {\n    return \"rh-autocomplete\";\n  }\n\n  get templateUrl() {\n    return \"rh-autocomplete.html\";\n  }\n\n  get styleUrl() {\n    return \"rh-autocomplete.scss\";\n  }\n\n  constructor() {\n    super(RhAutocomplete);\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    this.loading = false;\n    this.debounce = this.debounce || 300;\n\n    this._inputBox = this.shadowRoot.querySelector(\"#input-box\");\n    this._inputBox.debounce = this.debounce;\n\n    this._dropdown = this.shadowRoot.querySelector(\"#dropdown\");\n    this._dropdown.data = [];\n\n    this.activeIndex = null;\n\n    this.addEventListener(\n      \"rh-input-change-event\",\n      this._autocomplete.bind(this)\n    );\n    this.addEventListener(\"rh-input-blur\", this._closeDroplist.bind(this));\n    this.addEventListener(\"keyup\", this._inputKeyUp.bind(this));\n\n    // these two events, fire search\n    this.addEventListener(\"rh-search-event\", this._closeDroplist.bind(this));\n    this.addEventListener(\n      \"rh-option-selected\",\n      this._optionSelected.bind(this)\n    );\n  }\n\n  disconnectedCallback() {\n    this.removeEventListener(\n      \"rh-input-change-event\",\n      this._autocomplete.bind(this)\n    );\n    this.removeEventListener(\"rh-input-blur\", this._closeDroplist.bind(this));\n    this.removeEventListener(\"keyup\", this._inputKeyUp.bind(this));\n\n    this.removeEventListener(\"rh-search-event\", this._closeDroplist);\n    this.removeEventListener(\n      \"rh-option-selected\",\n      this._optionSelected.bind(this)\n    );\n  }\n\n  static get observedAttributes() {\n    return [\"init-value\", \"loading\", \"is-disabled\"];\n  }\n\n  attributeChangedCallback(attr, oldVal, newVal) {\n    super.attributeChangedCallback();\n    let searchBox = this.shadowRoot.querySelector(\"rh-search-box\").shadowRoot;\n    switch (attr) {\n      case \"loading\":\n        if (\n          !this.loading ||\n          this._inputBox.shadowRoot.querySelector(\"input\").value === \"\"\n        ) {\n          searchBox.querySelector(\".loading\").setAttribute(\"hidden\", \"\");\n        } else {\n          searchBox.querySelector(\".loading\").removeAttribute(\"hidden\");\n        }\n\n        break;\n\n      case \"is-disabled\":\n        if (this.isDisabled) {\n          searchBox.querySelectorAll(\"button\").forEach(e => {\n            e.setAttribute(\"disabled\", \"\");\n          });\n          searchBox.querySelector(\"input\").setAttribute(\"disabled\", \"\");\n        } else {\n          searchBox.querySelectorAll(\"button\").forEach(e => {\n            e.removeAttribute(\"disabled\");\n          });\n          searchBox.querySelector(\"input\").removeAttribute(\"disabled\");\n        }\n        break;\n\n      case \"init-value\":\n        if (this[\"init-value\"] !== newVal) {\n          this.shadowRoot\n            .querySelector(\"#input-box\")\n            .shadowRoot.querySelector(\"input\").value = newVal;\n        }\n        break;\n    }\n  }\n\n  set isDisabled(value) {\n    if (value) {\n      this.setAttribute(\"is-disabled\", \"\");\n    } else {\n      this.removeAttribute(\"is-disabled\");\n    }\n  }\n\n  get isDisabled() {\n    return this.hasAttribute(\"is-disabled\");\n  }\n\n  set loading(value) {\n    const loading = Boolean(value);\n    if (loading) {\n      this.setAttribute(\"loading\", \"\");\n    } else {\n      this.removeAttribute(\"loading\");\n    }\n  }\n\n  get loading() {\n    return this.hasAttribute(\"loading\");\n  }\n\n  get initValue() {\n    return this.getAttribute(\"init-value\");\n  }\n\n  set initValue(val) {\n    this.setAttribute(\"init-value\", val);\n  }\n\n  get debounce() {\n    return this.getAttribute(\"debounce\");\n  }\n\n  set debounce(val) {\n    this.setAttribute(\"debounce\", val);\n  }\n\n  _closeDroplist() {\n    this._dropdown.open = null;\n\n    this._dropdown.removeAttribute(\"active-index\");\n    this._inputBox.removeAttribute(\"active-index\");\n  }\n\n  _openDroplist() {\n    this._dropdown.setAttribute(\"open\", true);\n\n    this._dropdown.setAttribute(\"active-index\", null);\n    this._inputBox.setAttribute(\"active-index\", null);\n  }\n\n  _optionSelected(e) {\n    // update input box with selected value from options list\n    var selectedValue = e.detail.optionValue;\n    this._reset(selectedValue);\n\n    // send search request\n    this._dispatchSearchEvent(selectedValue);\n  }\n\n  _dispatchSearchEvent(searchQuery) {\n    this.dispatchEvent(\n      new CustomEvent(\"rh-search-event\", {\n        detail: { searchValue: searchQuery },\n        bubbles: true,\n        composed: true\n      })\n    );\n  }\n\n  _autocomplete(event) {\n    let input = event.detail.inputValue;\n    this._sendAutocompleteRequest(input);\n  }\n\n  _sendAutocompleteRequest(input) {\n    this.autocompleteRequest(\n      { query: input },\n      this._autocompleteCallback.bind(this)\n    );\n  }\n\n  _autocompleteCallback(response) {\n    this._dropdown.data = response;\n    this._dropdown.reflow = true;\n    response.length !== 0 ? this._openDroplist() : this._closeDroplist();\n  }\n\n  _reset() {\n    this._dropdown.activeIndex = null;\n    this._dropdown.data = [];\n    this._closeDroplist();\n  }\n\n  _activeOption(activeIndex) {\n    if (activeIndex === null || activeIndex === \"null\") return;\n    return this._dropdown.shadowRoot.querySelector(\n      \"li:nth-child(\" + (parseInt(activeIndex, 10) + 1) + \")\"\n    ).innerHTML;\n  }\n\n  _inputKeyUp(e) {\n    let key = e.keyCode;\n\n    if (\n      this._dropdown.data.length === 0 &&\n      key !== KEYCODE.DOWN &&\n      key !== KEYCODE.UP &&\n      key !== KEYCODE.ENTER &&\n      key !== KEYCODE.ESC\n    )\n      return;\n\n    let activeIndex = this._dropdown.activeIndex;\n    let optionsLength = this._dropdown.data.length;\n\n    if (key == KEYCODE.ESC) {\n      this._closeDroplist();\n    } else if (key === KEYCODE.UP) {\n      activeIndex =\n        activeIndex === null || activeIndex === \"null\"\n          ? optionsLength\n          : parseInt(activeIndex, 10);\n\n      activeIndex -= 1;\n\n      if (activeIndex < 0) {\n        activeIndex = optionsLength - 1;\n      }\n\n      this._inputBox.shadowRoot.querySelector(\n        \"input\"\n      ).value = this._activeOption(activeIndex);\n    } else if (key === KEYCODE.DOWN) {\n      activeIndex =\n        activeIndex === null || activeIndex === \"null\"\n          ? -1\n          : parseInt(activeIndex, 10);\n      activeIndex += 1;\n\n      if (activeIndex > optionsLength - 1) {\n        activeIndex = 0;\n      }\n\n      this._inputBox.shadowRoot.querySelector(\n        \"input\"\n      ).value = this._activeOption(activeIndex);\n    } else if (key === KEYCODE.ENTER) {\n      let selectedValue = this._inputBox.shadowRoot.querySelector(\"input\")\n        .value;\n      this._reset();\n      // send search request\n      this._dispatchSearchEvent(selectedValue);\n      return;\n    }\n\n    this._dropdown.activeIndex = activeIndex;\n    this._inputBox.activeIndex = activeIndex;\n  }\n}\n\n/*\n* - Attributes ------------------------------------\n* value        | input box value\n* active-index | Set selected option\n* debounce     | debounce value for firing rh-input-change-event event\n\n* - Events ----------------------------------------\n* rh-input-change-event | Fires when user type in input box\n* rh-input-blur         | Fires when input box blurs\n*/\nclass RhSearchBox extends RHElement {\n  get html() {\n    return `\n<style>\n:host {\n  position: relative;\n  display: flex; }\n\n.sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  border: 0; }\n\ninput {\n  width: 100%;\n  flex: 1;\n  box-shadow: inset 0 0px 0px rgba(0, 0, 0, 0.075) !important;\n  padding-left: 10px;\n  padding-right: 30px;\n  border-radius: 0;\n  background-color: #fff;\n  border: 1px solid var(--rh-theme--color--surface--border, #dfdfdf);\n  font-size: 16px;\n  \n  height: 40px;\n  transition: border-color ease-in-out 0.15s,box-shadow ease-in-out 0.15s; }\n\ninput:disabled,\nbutton:disabled {\n  cursor: not-allowed;\n  background-color: transparent;\n  color: #ccc;\n  opacity: 1; }\n\ninput:focus,\ninput:focus ~ button.search-button {\n  border-color: #66afe9;\n  outline: 0; }\n\ninput[type=\"search\"],\nbutton {\n  -webkit-appearance: none; }\n\ninput[type=\"search\"]::-ms-clear {\n  display: none; }\n\ninput[type=\"search\"]::-webkit-search-cancel-button,\ninput[type=\"search\"]::-webkit-search-decoration {\n  -webkit-appearance: none; }\n\nbutton {\n  color: #cccccc;\n  background-color: transparent;\n  border: none;\n  position: absolute;\n  top: 0px;\n  bottom: 0px;\n  padding: 0px;\n  margin: 0px;\n  cursor: pointer; }\n\nbutton.clear-search {\n  right: 31px;\n  width: 20px;\n  margin-right: 5px; }\n\nbutton.clear-search svg {\n  width: 12px;\n  stroke: #ccc; }\n\nbutton.clear-search:hover svg,\nbutton.clear-search:focus svg {\n  opacity: 1;\n  stroke: #06c; }\n\nbutton.search-button {\n  right: 1px;\n  width: 30px; }\n\nbutton.search-button svg {\n  fill: #06c;\n  width: 16px; }\n\nbutton.search-button:hover svg,\nbutton.search-button:focus svg {\n  fill: #004080; }\n\nbutton.clear-search:hover {\n  color: #ccc; }\n\nbutton.search-button:disabled svg {\n  fill: #ccc; }\n\n.loading {\n  position: absolute;\n  width: 25px;\n  right: 45px;\n  top: 62%;\n  transform: translate(-50%, -50%); }\n</style>\n<input placeholder=\"Enter Your Search Term\"\n  role=\"combobox\"\n  aria-label=\"Search\"\n  aria-autocomplete=\"both\"\n  aria-haspopup=\"true\"\n  type=\"search\"\n  autocomplete=\"off\"\n  autocorrect=\"off\"\n  autocapitalize=\"off\"\n  spellcheck=\"false\"\n  class=\"form-control\"/>\n\n<span class=\"loading\" aria-hidden=\"true\" hidden>\n  <svg viewBox=\"0 0 40 40\" enable-background=\"new 0 0 40 40\">\n    <path opacity=\"0.2\" fill=\"#000\" d=\"M20.201,5.169c-8.254,0-14.946,6.692-14.946,14.946c0,8.255,6.692,14.946,14.946,14.946\n    s14.946-6.691,14.946-14.946C35.146,11.861,28.455,5.169,20.201,5.169z M20.201,31.749c-6.425,0-11.634-5.208-11.634-11.634\n    c0-6.425,5.209-11.634,11.634-11.634c6.425,0,11.633,5.209,11.633,11.634C31.834,26.541,26.626,31.749,20.201,31.749z\"/>\n    <path fill=\"#000\" d=\"M26.013,10.047l1.654-2.866c-2.198-1.272-4.743-2.012-7.466-2.012h0v3.312h0\n    C22.32,8.481,24.301,9.057,26.013,10.047z\">\n    <animateTransform attributeType=\"xml\"\n      attributeName=\"transform\"\n      type=\"rotate\"\n      from=\"0 20 20\"\n      to=\"360 20 20\"\n      dur=\"0.5s\"\n      repeatCount=\"indefinite\"/>\n    </path>\n  </svg>\n</span>\n\n<button type=\"button\" class=\"clear-search\" aria-label=\"clear search query\">\n  <svg viewBox=\"0 0 40 40\" enable-background=\"new 0 0 40 40\">\n    <line x1=\"5\" y1=\"5\" x2=\"35\" y2=\"35\" stroke-width=\"10\" stroke-linecap=\"round\" stroke-miterlimit=\"10\"></line>\n    <line x1=\"35\" y1=\"5\" x2=\"5\" y2=\"35\" stroke-width=\"10\" stroke-linecap=\"round\" stroke-miterlimit=\"10\"></line>\n  </svg>\n</button>\n<button class=\"search-button\" type=\"button\" aria-label=\"Search\">\n  <svg viewBox=\"0 0 512 512\">\n    <path d=\"M256.233,5.756c-71.07,15.793-141.44,87.863-155.834,159.233c-11.495,57.076,0.3,111.153,27.688,154.335L6.339,441.172\n  c-8.596,8.596-8.596,22.391,0,30.987l33.286,33.286c8.596,8.596,22.391,8.596,30.987,0L192.26,383.796\n  c43.282,27.688,97.559,39.683,154.734,28.188c79.167-15.893,142.04-77.067,159.632-155.934\n  C540.212,104.314,407.968-27.93,256.233,5.756z M435.857,208.37c0,72.869-59.075,131.944-131.944,131.944\n  S171.969,281.239,171.969,208.37S231.043,76.426,303.913,76.426S435.857,135.501,435.857,208.37z\"/>\n  </svg>\n</button>`;\n  }\n\n  static get tag() {\n    return \"rh-search-box\";\n  }\n\n  get templateUrl() {\n    return \"rh-search-box.html\";\n  }\n\n  get styleUrl() {\n    return \"rh-search-box.scss\";\n  }\n\n  constructor() {\n    super(RhSearchBox);\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    // input box\n    this._input = this.shadowRoot.querySelector(\"input\");\n    this._input.addEventListener(\"input\", this._inputChanged.bind(this));\n    this._input.addEventListener(\"blur\", this._inputBlured.bind(this));\n\n    // clear button\n    this._clearBtn = this.shadowRoot.querySelector(\".clear-search\");\n    this._clearBtn.addEventListener(\"click\", this._clear.bind(this));\n\n    // search button\n    this._searchBtn = this.shadowRoot.querySelector(\".search-button\");\n    this._searchBtn.addEventListener(\"click\", this._search.bind(this));\n  }\n\n  disconnectedCallback() {\n    this._input.removeEventListener(\"input\", this._inputChanged);\n    this._input.removeEventListener(\"blur\", this._inputBlured);\n\n    this._clearBtn.removeEventListener(\"click\", this._clear);\n    this._searchBtn.removeEventListener(\"click\", this._search);\n  }\n\n  static get observedAttributes() {\n    return [\"active-index\"];\n  }\n\n  get activeIndex() {\n    return this.getAttribute(\"active-index\") || null;\n  }\n\n  set activeIndex(val) {\n    this.setAttribute(\"active-index\", val);\n  }\n\n  get debounce() {\n    return this.getAttribute(\"debounce\");\n  }\n\n  set debounce(val) {\n    this.setAttribute(\"debounce\", val);\n  }\n\n  attributeChangedCallback(attr, oldVal, newVal) {\n    super.attributeChangedCallback();\n\n    if (attr === \"active-index\") {\n      if (newVal) {\n        // add aria-activedescendant on input box\n        this._input.setAttribute(\"aria-activedescendant\", \"option-\" + newVal);\n      } else {\n        this._input.setAttribute(\"aria-activedescendant\", \"\");\n      }\n    }\n  }\n\n  _inputBlured() {\n    this.dispatchEvent(\n      new CustomEvent(\"rh-input-blur\", {\n        bubbles: true,\n        composed: true\n      })\n    );\n  }\n\n  _inputChanged() {\n    if (this._input.value === \"\") {\n      this._searchBtn.setAttribute(\"disabled\", true);\n      this._clearBtn.setAttribute(\"hidden\", true);\n    } else {\n      if (!this._input.hasAttribute(\"disabled\"))\n        this._searchBtn.removeAttribute(\"disabled\");\n      this._clearBtn.removeAttribute(\"hidden\");\n    }\n\n    if (throttle === false) {\n      throttle = true;\n\n      window.setTimeout(() => {\n        this.dispatchEvent(\n          new CustomEvent(\"rh-input-change-event\", {\n            detail: { inputValue: this._input.value },\n            bubbles: true,\n            composed: true\n          })\n        );\n\n        throttle = false;\n      }, this.debounce);\n    }\n  }\n\n  _clear() {\n    this._input.value = \"\";\n    this._clearBtn.setAttribute(\"hidden\", true);\n    this._searchBtn.setAttribute(\"disabled\", true);\n    this._input.focus();\n  }\n\n  _search(event) {\n    this.dispatchEvent(\n      new CustomEvent(\"rh-search-event\", {\n        detail: { searchValue: this._input.value },\n        bubbles: true,\n        composed: true\n      })\n    );\n  }\n}\n\n/*\n* - Attributes ------------------------------------\n* open               | Set when the combo box dropdown is open\n* active-index       | Set selected option\n* reflow             | Re-renders the dropdown\n\n* - Events ----------------------------------------\n* rh-option-selected | Fires when an option is selected.\n  event.detailes.selectedValue contains the selected value.\n*/\nclass RhSearchDroplist extends RHElement {\n  get html() {\n    return `\n<style>\n:host {\n  position: relative;\n  display: none;\n  font-family: var(--rh-theme--font-family);\n  font-size: var(--rh-theme--font-size);\n  line-height: var(--rh-theme--line-height); }\n\n:host([open]) {\n  display: block; }\n\n.sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  border: 0; }\n\n.droplist {\n  position: absolute;\n  top: 100%;\n  left: 0px;\n  right: 0px;\n  max-height: 250px;\n  z-index: 9999;\n  overflow-y: scroll;\n  overflow-x: hidden;\n  border: 1px solid #ccc;\n  background-color: #fff; }\n\ninput {\n  font-family: var(--rh-theme--font-family);\n  font-size: var(--rh-theme--font-size);\n  line-height: var(--rh-theme--line-height); }\n\nul {\n  font-family: var(--rh-theme--font-family);\n  font-size: var(--rh-theme--font-size);\n  line-height: var(--rh-theme--line-height);\n  border-top: none;\n  margin: 0px;\n  padding: 0px;\n  list-style: none;\n  cursor: pointer; }\n  ul li {\n    display: list-item;\n    cursor: pointer;\n    padding: 10px;\n    margin: 0px;\n     }\n    ul li.active {\n      background-color: var(--rh-theme--color--surface--lighter, #ececec); }\n</style>\n<div class=\"suggestions-aria-help sr-only\" aria-hidden=\"false\" role=\"status\"></div>\n<div class=\"droplist\">\n  <ul role=\"listbox\" tabindex=\"-1\">\n  </ul>\n</div>`;\n  }\n\n  static get tag() {\n    return \"rh-search-droplist\";\n  }\n\n  get templateUrl() {\n    return \"rh-search-droplist.html\";\n  }\n\n  get styleUrl() {\n    return \"rh-search-droplist.scss\";\n  }\n\n  constructor() {\n    super(RhSearchDroplist);\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    this._ariaAnnounce = this.shadowRoot.querySelector(\n      \".suggestions-aria-help\"\n    );\n\n    this.activeIndex = null;\n    this._ul = this.shadowRoot.querySelector(\"ul\");\n    this._ul.addEventListener(\"mousedown\", this._optionSelected.bind(this));\n  }\n\n  disconnectedCallback() {\n    this._ul.removeEventListener(\"mousedown\", this._optionSelected);\n  }\n\n  _optionSelected(e) {\n    if (e.target.tagName === \"LI\") {\n      this.dispatchEvent(\n        new CustomEvent(\"rh-option-selected\", {\n          detail: { optionValue: e.target.innerText },\n          bubbles: true,\n          composed: true\n        })\n      );\n    }\n  }\n\n  _renderOptions() {\n    this.reflow = \"\";\n\n    let options = this.data;\n\n    this._ariaAnnounce.innerHTML = `There are ${\n      options.length\n    } suggestions. Use the up and down arrows to browse.`;\n    this._ariaAnnounce.setAttribute(\"aria-live\", \"polite\");\n\n    this._ul.innerHTML = `${options\n      .map((item, index) => {\n        return `<li id=\"option-${index}\" role=\"option\" tabindex=\"-1\" value=\"${item}\">${item}</li>`;\n      })\n      .join(\"\")}`;\n  }\n\n  static get observedAttributes() {\n    return [\"open\", \"reflow\", \"active-index\"];\n  }\n\n  attributeChangedCallback(attr, oldVal, newVal) {\n    super.attributeChangedCallback();\n\n    if (this[name] !== newVal) {\n      this[name] = newVal;\n    }\n\n    if (attr === \"active-index\" && oldVal !== newVal) {\n      this._activeIndexChanged();\n    }\n\n    if (attr === \"reflow\") {\n      this._renderOptions();\n    }\n  }\n\n  _activeIndexChanged() {\n    if (\n      !this.data ||\n      this.data.length === 0 ||\n      this.activeIndex === null ||\n      this.activeIndex === \"null\"\n    )\n      return;\n\n    // remove active class\n    if (this._ul.querySelector(\".active\")) {\n      this._ul.querySelector(\".active\").classList.remove(\"active\");\n    }\n\n    // add active class to selected option\n    let activeOption = this._ul.querySelector(\n      \"li:nth-child(\" + (parseInt(this.activeIndex, 10) + 1) + \")\"\n    );\n\n    activeOption.classList.add(\"active\");\n\n    // scroll to selected element when selected item with keyboard is out of view\n    let ulWrapper = this.shadowRoot.querySelector(\".droplist\");\n    let activeOptionHeight = activeOption.offsetHeight;\n    activeOptionHeight += parseInt(\n      window.getComputedStyle(activeOption).getPropertyValue(\"margin-bottom\"),\n      10\n    );\n    ulWrapper.scrollTop =\n      activeOption.offsetTop - ulWrapper.offsetHeight + activeOptionHeight;\n  }\n\n  get open() {\n    return this.shadowRoot.hasAttribute(\"open\");\n  }\n\n  set open(val) {\n    val = Boolean(val);\n\n    if (val) {\n      this.setAttribute(\"open\", \"\");\n    } else {\n      this.removeAttribute(\"open\");\n    }\n  }\n\n  get activeIndex() {\n    return this.getAttribute(\"active-index\");\n  }\n\n  set activeIndex(val) {\n    this.setAttribute(\"active-index\", val);\n  }\n\n  get reflow() {\n    return this.hasAttribute(\"reflow\");\n  }\n\n  set reflow(val) {\n    val = Boolean(val);\n\n    if (val) {\n      this.setAttribute(\"reflow\", \"\");\n    } else {\n      this.removeAttribute(\"reflow\");\n    }\n  }\n}\n\nRHElement.create(RhSearchBox);\nRHElement.create(RhSearchDroplist);\nRHElement.create(RhAutocomplete);\n\nexport default RhAutocomplete;\n"],"names":["KEYCODE","throttle","RhAutocomplete","RHElement","loading","debounce","this","_inputBox","shadowRoot","querySelector","_dropdown","data","activeIndex","addEventListener","_autocomplete","bind","_closeDroplist","_inputKeyUp","_optionSelected","removeEventListener","attr","oldVal","newVal","searchBox","value","removeAttribute","setAttribute","isDisabled","querySelectorAll","forEach","open","e","selectedValue","detail","optionValue","_reset","_dispatchSearchEvent","searchQuery","dispatchEvent","CustomEvent","searchValue","event","input","inputValue","_sendAutocompleteRequest","autocompleteRequest","query","_autocompleteCallback","response","reflow","length","_openDroplist","parseInt","innerHTML","key","keyCode","optionsLength","_activeOption","hasAttribute","Boolean","getAttribute","val","RhSearchBox","_input","_inputChanged","_inputBlured","_clearBtn","_clear","_searchBtn","_search","setTimeout","_this3","focus","RhSearchDroplist","_ariaAnnounce","_ul","target","tagName","innerText","options","map","item","index","join","name","_activeIndexChanged","_renderOptions","classList","remove","activeOption","add","ulWrapper","activeOptionHeight","offsetHeight","window","getComputedStyle","getPropertyValue","scrollTop","offsetTop","create"],"mappings":"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"}