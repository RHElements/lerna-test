{"version":3,"file":"rh-autocomplete.js","sources":["rh-autocomplete.js"],"sourcesContent":["/*\n * Copyright 2018 Red Hat, Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport RHElement from \"../rhelement/rhelement.js\";\n\nconst KEYCODE = {\n  ENTER: 13,\n  DOWN: 40,\n  UP: 38,\n  ESC: 27\n};\n\n// use this variable to debounce api call when user types very fast\nlet throttle = false;\n\nclass RhAutocomplete extends RHElement {\n  get html() {\n    return `\n<style>\n:host {\n  display: block; }\n</style>\n<rh-search-box id=\"input-box\"></rh-search-box>\n<rh-search-droplist id=\"dropdown\"></rh-search-droplist>`;\n  }\n\n  static get tag() {\n    return \"rh-autocomplete\";\n  }\n\n  get templateUrl() {\n    return \"rh-autocomplete.html\";\n  }\n\n  get styleUrl() {\n    return \"rh-autocomplete.scss\";\n  }\n\n  constructor() {\n    super(RhAutocomplete);\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    this._inputBox = this.shadowRoot.querySelector(\"#input-box\");\n    this._inputBox.value = this.initValue;\n    this._inputBox.debounce = this.debounce || 500;\n\n    this._dropdown = this.shadowRoot.querySelector(\"#dropdown\");\n    this._dropdown.data = [];\n\n    this.addEventListener(\n      \"rh-input-change-event\",\n      this._autocomplete.bind(this)\n    );\n    this.addEventListener(\"rh-input-blur\", this._closeDroplist.bind(this));\n    this.addEventListener(\"keyup\", this._inputKeyUp.bind(this));\n\n    // these two events, fire search\n    this.addEventListener(\"rh-search-event\", this._closeDroplist.bind(this));\n    this.addEventListener(\n      \"rh-option-selected\",\n      this._optionSelected.bind(this)\n    );\n  }\n\n  disconnectedCallback() {\n    this.removeEventListener(\n      \"rh-input-change-event\",\n      this._autocomplete.bind(this)\n    );\n    this.removeEventListener(\"rh-input-blur\", this._closeDroplist.bind(this));\n    this.removeEventListener(\"keyup\", this._inputKeyUp.bind(this));\n\n    this.removeEventListener(\"rh-search-event\", this._closeDroplist);\n    this.removeEventListener(\n      \"rh-option-selected\",\n      this._optionSelected.bind(this)\n    );\n  }\n\n  get initValue() {\n    return this.getAttribute(\"init-value\");\n  }\n\n  set initValue(val) {\n    this.setAttribute(\"init-value\", val);\n  }\n\n  get debounce() {\n    return this.getAttribute(\"debounce\");\n  }\n\n  set debounce(val) {\n    this.setAttribute(\"debounce\", val);\n  }\n\n  _closeDroplist() {\n    this._dropdown.open = null;\n    this._inputBox.setAttribute(\"aria-open\", \"\");\n  }\n\n  _openDroplist() {\n    this._dropdown.setAttribute(\"open\", true);\n    this._inputBox.setAttribute(\"aria-open\", true);\n  }\n\n  _optionSelected(e) {\n    // update input box with selected value from options list\n    var selectedValue = e.detail.optionValue;\n    this._reset(selectedValue);\n\n    // send search request\n    this._dispatchSearchEvent(selectedValue);\n  }\n\n  _dispatchSearchEvent(searchQuery) {\n    this.dispatchEvent(\n      new CustomEvent(\"rh-search-event\", {\n        detail: { searchValue: searchQuery },\n        bubbles: true,\n        composed: true\n      })\n    );\n  }\n\n  _autocomplete(event) {\n    let input = event.detail.inputValue;\n    this._sendAutocompleteRequest(input);\n  }\n\n  _sendAutocompleteRequest(input) {\n    this.autocompleteRequest(\n      { query: input },\n      this._autocompleteCallback.bind(this)\n    );\n  }\n\n  _autocompleteCallback(response) {\n    this._dropdown.data = response;\n    this._dropdown.reflow = true;\n    response.length !== 0 ? this._openDroplist() : this._closeDroplist();\n  }\n\n  _reset(selectedValue) {\n    this._inputBox.value = selectedValue;\n    this._dropdown.activeIndex = null;\n    this._dropdown.data = [];\n    this._closeDroplist();\n  }\n\n  _inputKeyUp(e) {\n    let key = e.keyCode;\n\n    if (\n      this._dropdown.data.length === 0 && //????\n      key !== KEYCODE.DOWN &&\n      key !== KEYCODE.UP &&\n      key !== KEYCODE.ENTER &&\n      key !== KEYCODE.ESC\n    )\n      return;\n\n    let activeIndex = parseInt(this._dropdown.activeIndex, 10) || null;\n    let selectedOption = this._dropdown.selectedOption;\n\n    let optionsLength = this._dropdown.data.length;\n\n    if (key == KEYCODE.ESC) {\n      this._closeDroplist();\n    } else if (key === KEYCODE.UP) {\n      activeIndex -= 1;\n\n      if (activeIndex < 0) {\n        activeIndex = optionsLength - 1;\n      }\n    } else if (key === KEYCODE.DOWN) {\n      activeIndex += 1;\n\n      if (activeIndex > optionsLength - 1) {\n        activeIndex = 0;\n      }\n    } else if (key === KEYCODE.ENTER) {\n      let selectedValue;\n      if (activeIndex) {\n        selectedValue = this._dropdown.getAttribute(\"selected-option\");\n        this._reset(selectedValue);\n      } else {\n        selectedValue = this._inputBox.value;\n      }\n\n      // send search request\n      this._dispatchSearchEvent(selectedValue);\n      return;\n    }\n\n    this._dropdown.activeIndex = activeIndex;\n  }\n}\n\n/*\n* - Attributes ------------------------------------\n* value     | input box value\n* aria-open | A list is attached to input box. Use this attribute to set\n* debounce  | debounce value for firing rh-input-change-event event\n              aria-autocomplete=\"list\" and aria-haspopup=\"true\" on input box\n\n* - Events ----------------------------------------\n* rh-input-change-event | Fires when user type in input box\n* rh-input-blur         | Fires when input box blurs\n*/\nclass RhSearchBox extends RHElement {\n  get html() {\n    return `\n<style>\n:host {\n  position: relative;\n  display: flex; }\n\n.sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  border: 0; }\n\ninput {\n  width: 100%;\n  flex: 1;\n  box-shadow: inset 0 1px 0px rgba(0, 0, 0, 0.075) !important;\n  padding-left: 5px;\n  border-radius: 0;\n  background: #fff;\n  border: 1px solid #d1d1d1;\n  border-right: none;\n  font-size: 16px;\n  \n  line-height: 24px;\n  \n  height: 35px;\n  margin: 0px;\n  transition: border-color ease-in-out 0.15s,box-shadow ease-in-out 0.15s; }\n\ninput:focus,\ninput:focus ~ button.search-button {\n  border-color: #66afe9;\n  outline: 0; }\n\ninput[type=\"search\"],\nbutton {\n  -webkit-appearance: none; }\n\ninput[type=\"search\"]::-ms-clear {\n  display: none; }\n\ninput[type=\"search\"]::-webkit-search-cancel-button,\ninput[type=\"search\"]::-webkit-search-decoration {\n  -webkit-appearance: none; }\n\nbutton.clear-search {\n  font-size: 27px;\n  color: #cccccc;\n  background-color: #fff;\n  font-weight: 600;\n  border: none;\n  line-height: 20px;\n  position: absolute;\n  right: 50px;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  padding: 0px;\n  margin: 0px; }\n\nbutton.clear-search:hover {\n  opacity: 1;\n  color: #06c; }\n\nbutton.search-button {\n  box-shadow: inset 0 1px 0px rgba(0, 0, 0, 0.075);\n  background-color: #fff;\n  border-color: #0076e0;\n  color: #06c;\n  border: 1px solid #d1d1d1;\n  border-left: none;\n  margin: 0px;\n  transition: border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s; }\n\nbutton[disabled=\"true\"] {\n  color: #ccc; }\n</style>\n<label for=\"keywordInputx\" class=\"sr-only\">Keyword</label>\n  <input placeholder=\"Enter Your Search Term\"\n    role=\"search\"\n    type=\"search\"\n    autocomplete=\"off\"\n    autocorrect=\"off\"\n    autocapitalize=\"off\"\n    spellcheck=\"false\"\n    class=\"form-control\"/>\n  <button type=\"button\" class=\"clear-search\" aria-label=\"clear search query\">\n    &times;\n  </button>\n  <button class=\"search-button\" type=\"button\" aria-label=\"Search\">\n      <span class=\"web-icon-search\" aria-hidden=\"true\" title=\"Search\">Search</span>\n  </button>`;\n  }\n\n  static get tag() {\n    return \"rh-search-box\";\n  }\n\n  get templateUrl() {\n    return \"rh-search-box.html\";\n  }\n\n  get styleUrl() {\n    return \"rh-search-box.scss\";\n  }\n\n  constructor() {\n    super(RhSearchBox);\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    // input box\n    this._input = this.shadowRoot.querySelector(\"input\");\n    this._input.addEventListener(\"input\", this._inputChanged.bind(this));\n    this._input.addEventListener(\"blur\", this._inputBlured.bind(this));\n\n    // clear button\n    this._clearBtn = this.shadowRoot.querySelector(\".clear-search\");\n    this._clearBtn.addEventListener(\"click\", this._clear.bind(this));\n\n    // search button\n    this._searchBtn = this.shadowRoot.querySelector(\".search-button\");\n    this._searchBtn.addEventListener(\"click\", this._search.bind(this));\n  }\n\n  disconnectedCallback() {\n    this._input.removeEventListener(\"input\", this._inputChanged);\n    this._input.removeEventListener(\"blur\", this._inputBlured);\n\n    this._clearBtn.removeEventListener(\"click\", this._clear);\n    this._searchBtn.removeEventListener(\"click\", this._search);\n  }\n\n  static get observedAttributes() {\n    return [\"value\", \"aria-open\"];\n  }\n\n  get value() {\n    return this.getAttribute(\"value\");\n  }\n\n  set value(val) {\n    this.setAttribute(\"value\", val);\n  }\n\n  get ariaOpen() {\n    return this.hasAttribute(\"aria-open\");\n  }\n\n  set ariaOpen(val) {\n    val = Boolean(val);\n\n    if (val) {\n      this.setAttribute(\"aria-open\", \"\");\n    } else {\n      this.removeAttribute(\"aria-open\");\n    }\n  }\n\n  get debounce() {\n    return this.getAttribute(\"debounce\");\n  }\n\n  set debounce(val) {\n    this.setAttribute(\"debounce\", val);\n  }\n\n  attributeChangedCallback(attr, oldVal, newVal) {\n    super.attributeChangedCallback();\n\n    if (attr === \"value\") {\n      this._input.value = newVal;\n\n      if (newVal === \"\") {\n        this._searchBtn.setAttribute(\"disabled\", true);\n      } else {\n        this._searchBtn.removeAttribute(\"disabled\");\n        this._clearBtn.removeAttribute(\"hidden\");\n      }\n    }\n\n    if (attr === \"aria-open\") {\n      if (newVal) {\n        this._input.setAttribute(\"aria-autocomplete\", \"list\");\n        this._input.setAttribute(\"aria-haspopup\", true);\n      } else {\n        this._input.removeAttribute(\"aria-autocomplete\", \"\");\n        this._input.removeAttribute(\"aria-haspopup\", \"\");\n      }\n    }\n\n  }\n\n  _inputBlured() {\n    this.dispatchEvent(\n      new CustomEvent(\"rh-input-blur\", {\n        bubbles: true,\n        composed: true\n      })\n    );\n  }\n\n  _inputChanged() {\n    this.value = this._input.value;\n\n    if (throttle === false) {\n      throttle = true;\n\n      window.setTimeout(() => {\n        this.dispatchEvent(\n          new CustomEvent(\"rh-input-change-event\", {\n            detail: { inputValue: this._input.value },\n            bubbles: true,\n            composed: true\n          })\n        );\n\n        throttle = false;\n      }, parseInt(this.debounce, 10) || 500);\n    }\n  }\n\n  _clear() {\n    this._input.value = \"\";\n    this._clearBtn.setAttribute(\"hidden\", true);\n    this._searchBtn.setAttribute(\"disabled\", true);\n    this._input.focus();\n  }\n\n  _search(event) {\n    this.dispatchEvent(\n      new CustomEvent(\"rh-search-event\", {\n        detail: { searchValue: this._input.value },\n        bubbles: true,\n        composed: true\n      })\n    );\n  }\n}\n\n/*\n* - Attributes ------------------------------------\n* open               | Set when the combo box dropdown is open\n* active-index       | Set selected option\n* loading            | Set when new items are expected\n* reflow             | Re-renders the dropdown\n\n* - Events ----------------------------------------\n* rh-option-selected | Fires when an option is selected.\n  event.detailes.selectedValue contains the selected value.\n*/\nclass RhSearchDroplist extends RHElement {\n  get html() {\n    return `\n<style>\n:host {\n  position: relative;\n  display: none; }\n\n:host([open]) {\n  display: block; }\n\n.sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  border: 0; }\n\nul {\n  display: block;\n  position: absolute;\n  top: 100%;\n  left: 0px;\n  right: 0px;\n  background-color: #fff;\n  border: 1px solid #ccc;\n  border-top: none;\n  z-index: 9999;\n  margin: 0px;\n  padding: 0px;\n  list-style: none;\n  cursor: pointer;\n  overflow-y: scroll;\n  overflow-x: hidden; }\n\nul li.active {\n  background-color: #f0f0f0; }\n\nul li {\n  display: list-item;\n  cursor: pointer;\n  padding: 7px 10px;\n  margin: 2px 0px 2px 0px; }\n</style>\n<div class=\"suggestions-aria-help sr-only\" role=\"status\" aria-activedescendant=\"option-0\"></div>\n<ul role=\"listbox\" tabindex=\"-1\">\n</ul>`;\n  }\n\n  static get tag() {\n    return \"rh-search-droplist\";\n  }\n\n  get templateUrl() {\n    return \"rh-search-droplist.html\";\n  }\n\n  get styleUrl() {\n    return \"rh-search-droplist.scss\";\n  }\n\n  constructor() {\n    super(RhSearchDroplist);\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    this._ariaAnnounce = this.shadowRoot.querySelector(\n      \".suggestions-aria-help\"\n    );\n\n    this._ul = this.shadowRoot.querySelector(\"ul\");\n    this._ul.addEventListener(\"mousedown\", this._optionSelected.bind(this));\n  }\n\n  disconnectedCallback() {\n    this._ul.removeEventListener(\"mousedown\", this._optionSelected);\n  }\n\n  _optionSelected(e) {\n    if (e.target.tagName === \"LI\") {\n      this.dispatchEvent(\n        new CustomEvent(\"rh-option-selected\", {\n          detail: { optionValue: e.target.innerText },\n          bubbles: true,\n          composed: true\n        })\n      );\n    }\n  }\n\n  _renderOptions() {\n    this.reflow = \"\";\n\n    let options = this.data;\n\n    this._ariaAnnounce.innerHTML = `There are ${\n      options.length\n    } suggestions. Use the up and down arrows to browse.`;\n    this._ariaAnnounce.setAttribute(\"aria-live\", \"polite\");\n\n    this._ul.innerHTML = `${options\n      .map((item, index) => {\n        return `<li id=\"option-${index}\" class=\"${\n          index === 0 ? \"active\" : \"\"\n        }\" role=\"option\" tabindex=\"-1\" value=\"${item}\">${item}</li>`;\n      })\n      .join(\"\")}`;\n  }\n\n  static get observedAttributes() {\n    return [\"open\", \"reflow\", \"active-index\", \"selected-option\"];\n  }\n\n  attributeChangedCallback(attr, oldVal, newVal) {\n    super.attributeChangedCallback();\n\n    if (this[name] !== newVal) {\n      this[name] = newVal;\n    }\n\n    if (attr === \"active-index\" && oldVal !== newVal) {\n      this._activeIndexChanged();\n    }\n\n    if (attr === \"reflow\") {\n      this._renderOptions();\n    }\n  }\n\n  _activeIndexChanged() {\n    if (isNaN(this.activeIndex) || this.data.length === 0) return;\n\n    // add aria-activedescendant\n    this._ul.setAttribute(\n      \"aria-activedescendant\",\n      \"option-\" + this.activeIndex\n    );\n\n    // remove active class\n    this._ul.querySelector(\".active\").classList.remove(\"active\");\n\n    // add active class to selected option\n    let activeOption = this._ul.querySelector(\n      \"li:nth-child(\" + (this.activeIndex + 1) + \")\"\n    );\n    this.selectedOption = activeOption.innerHTML;\n    activeOption.classList.add(\"active\");\n  }\n\n  get open() {\n    return this.shadowRoot.hasAttribute(\"open\");\n  }\n\n  set open(val) {\n    val = Boolean(val);\n\n    if (val) {\n      this.setAttribute(\"open\", \"\");\n    } else {\n      this.removeAttribute(\"open\");\n    }\n  }\n\n  get activeIndex() {\n    return parseInt(this.getAttribute(\"active-index\"), 10);\n  }\n\n  set activeIndex(val) {\n    this.setAttribute(\"active-index\", val);\n  }\n\n  get selectedOption() {\n    this.getAttribute(\"selected-option\");\n  }\n\n  set selectedOption(val) {\n    this.setAttribute(\"selected-option\", val);\n  }\n\n  get reflow() {\n    return this.hasAttribute(\"reflow\");\n  }\n\n  set reflow(val) {\n    val = Boolean(val);\n\n    if (val) {\n      this.setAttribute(\"reflow\", \"\");\n    } else {\n      this.removeAttribute(\"reflow\");\n    }\n  }\n}\n\nRHElement.create(RhSearchBox);\nRHElement.create(RhSearchDroplist);\nRHElement.create(RhAutocomplete);\n\nexport default RhAutocomplete;\n"],"names":[],"mappings":"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"}