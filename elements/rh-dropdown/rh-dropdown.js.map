{"version":3,"file":"rh-dropdown.js","sources":["rh-dropdown.js"],"sourcesContent":["/*\n * Copyright 2018 Red Hat, Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport RHElement from \"../rhelement/rhelement.js\";\nimport \"../rh-dropdown-button/rh-dropdown-button.js\";\nimport \"../rh-dropdown-menu/rh-dropdown-menu.js\";\n\n// https://tc39.github.io/ecma262/#sec-array.prototype.findIndex\nif (!Array.prototype.findIndex) {\n  Object.defineProperty(Array.prototype, \"findIndex\", {\n    value: function(predicate) {\n      // 1. Let O be ? ToObject(this value).\n      if (this == null) {\n        throw new TypeError('\"this\" is null or not defined');\n      }\n\n      var o = Object(this);\n\n      // 2. Let len be ? ToLength(? Get(O, \"length\")).\n      var len = o.length >>> 0;\n\n      // 3. If IsCallable(predicate) is false, throw a TypeError exception.\n      if (typeof predicate !== \"function\") {\n        throw new TypeError(\"predicate must be a function\");\n      }\n\n      // 4. If thisArg was supplied, let T be thisArg; else let T be undefined.\n      var thisArg = arguments[1];\n\n      // 5. Let k be 0.\n      var k = 0;\n\n      // 6. Repeat, while k < len\n      while (k < len) {\n        // a. Let Pk be ! ToString(k).\n        // b. Let kValue be ? Get(O, Pk).\n        // c. Let testResult be ToBoolean(? Call(predicate, T, « kValue, k, O »)).\n        // d. If testResult is true, return k.\n        var kValue = o[k];\n        if (predicate.call(thisArg, kValue, k, o)) {\n          return k;\n        }\n        // e. Increase k by 1.\n        k++;\n      }\n\n      // 7. Return -1.\n      return -1;\n    }\n  });\n}\n\n// Set up a unique ID\nconst baseID = Date.now();\n\nclass RhDropdown extends RHElement {\n  get html() {\n    return `\n<style>\n:host {\n  position: relative; }\n</style>\n<slot></slot>`;\n  }\n\n  static get tag() {\n    return \"rh-dropdown\";\n  }\n\n  get styleUrl() {\n    return \"rh-dropdown.scss\";\n  }\n\n  get templateUrl() {\n    return \"rh-dropdown.html\";\n  }\n\n  constructor() {\n    super(RhDropdown.tag);\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    this.setAttribute(\"defined\", \"\");\n\n    const thisButton = this._thisButton();\n    const thisMenu = this._thisMenu();\n\n    customElements.whenDefined(\"rh-dropdown-button\").then(() => {\n      let button = thisButton.shadowRoot.querySelector(\"button\");\n      button.setAttribute(\"aria-controls\", \"rh-dropdown-\" + baseID);\n      button.setAttribute(\"id\", \"rh-dropdown-button-\" + baseID);\n    });\n    customElements.whenDefined(\"rh-dropdown-menu\").then(() => {\n      let menu = thisMenu.shadowRoot.querySelector(\"ul\");\n      menu.setAttribute(\"id\", \"rh-dropdown-\" + baseID);\n      menu.setAttribute(\"aria-labelledby\", \"rh-dropdown-button-\" + baseID);\n    });\n\n    this.addEventListener(\"rh-dropdown-change\", this._changeHandler);\n    this.addEventListener(\"rh-dropdown-close\", this._closeHandler);\n    this.addEventListener(\"keydown\", this._keydownHandler);\n    this.addEventListener(\"click\", this._clickHandler);\n  }\n\n  disconnectedCallback() {\n    this.removeEventListener(\"rh-dropdown-change\", this._changeHandler);\n    this.removeEventListener(\"rh-dropdown-close\", this._closeHandler);\n    this.removeEventListener(\"keydown\", this._keydownHandler);\n    this.removeEventListener(\"click\", this._clickHandler);\n  }\n\n  _changeHandler(evt) {\n    const rhDropdownButton = this._thisButton();\n    const rhDropdownMenu = this._thisMenu();\n\n    if (evt.detail.expanded) {\n      this._expandMenu(rhDropdownButton, rhDropdownMenu);\n    } else {\n      this._collapseMenu(rhDropdownButton, rhDropdownMenu);\n      this._focusOnButton(rhDropdownButton);\n    }\n  }\n\n  _closeHandler(evt) {\n    const rhDropdownButton = this._thisButton();\n    const rhDropdownMenu = this._thisMenu();\n    this._collapseMenu(rhDropdownButton, rhDropdownMenu);\n  }\n\n  _clickHandler(evt) {\n    const rhDropdownButton = this._thisButton();\n    const rhDropdownMenu = this._thisMenu();\n    const link = evt.composedPath()[0];\n\n    if (link.nodeName == \"A\") {\n      this._collapseMenu(rhDropdownButton, rhDropdownMenu);\n    }\n  }\n\n  _expandMenu(rhDropdownButton, rhDropdownMenu) {\n    let list = rhDropdownMenu.shadowRoot.querySelector(\"ul\");\n    rhDropdownButton.expanded = true;\n    list.removeAttribute(\"hidden\");\n    list.querySelector(\"li:first-child > a\").focus();\n  }\n\n  _collapseMenu(rhDropdownButton, rhDropdownMenu) {\n    rhDropdownButton.expanded = false;\n    rhDropdownMenu.shadowRoot\n      .querySelector(\"ul\")\n      .setAttribute(\"hidden\", \"hidden\");\n  }\n\n  _focusOnButton(rhDropdownButton) {\n    let button = rhDropdownButton.shadowRoot.querySelector(\"button\");\n    button.focus();\n  }\n\n  _thisButton() {\n    return this.querySelector(\"rh-dropdown-button\");\n  }\n\n  _thisMenu() {\n    return this.querySelector(\"rh-dropdown-menu\");\n  }\n\n  _keydownHandler(evt) {\n    const thisButton = this._thisButton();\n    let newItem,\n      flaggedKey = false,\n      pressedKey = evt.key,\n      onBtn = thisButton.shadowRoot.activeElement;\n\n    if (evt.shiftKey) {\n      if (this._isPrintableCharacter(pressedKey)) {\n        newItem = this._getLinkByFirstCharacter(pressedKey);\n      }\n    } else if (this._isPrintableCharacter(pressedKey)) {\n      newItem = this._getLinkByFirstCharacter(pressedKey);\n    } else {\n      switch (pressedKey) {\n        case \"ArrowDown\":\n        case \"Down\":\n          newItem = this._nextLink();\n          flaggedKey = true;\n          break;\n        case \"ArrowUp\":\n        case \"Up\":\n          newItem = this._previousLink();\n          flaggedKey = true;\n          break;\n        case \"Home\":\n        case \"PageUp\":\n          newItem = this._firstLink();\n          flaggedKey = true;\n          break;\n        case \"End\":\n        case \"PageDown\":\n          newItem = this._lastLink();\n          flaggedKey = true;\n          break;\n        case \" \":\n          if (!onBtn) {\n            flaggedKey = true;\n          }\n          break;\n        case \"Tab\":\n          this.dispatchEvent(\n            new CustomEvent(\"rh-dropdown-close\", {\n              detail: { expanded: false }\n            })\n          );\n          break;\n        case \"Escape\":\n          flaggedKey = true;\n          this.dispatchEvent(\n            new CustomEvent(\"rh-dropdown-change\", {\n              detail: { expanded: false }\n            })\n          );\n          return;\n        default:\n          return;\n      }\n\n      if (flaggedKey) {\n        event.stopPropagation();\n        event.preventDefault();\n      }\n    }\n\n    if (newItem && newItem != -1) {\n      newItem.querySelector(\"a\").focus();\n    }\n  }\n\n  _allLinks() {\n    const thisMenu = this._thisMenu();\n    return [...thisMenu.shadowRoot.querySelectorAll(\"li\")];\n  }\n\n  _isPrintableCharacter(str) {\n    return str.length === 1 && str.match(/\\S/);\n  }\n\n  _getIndexFirstChars(startIndex, char) {\n    const links = this._allLinks();\n    for (var i = startIndex; i < links.length; i++) {\n      let thisChar = links[i]\n        .querySelector(\"a\")\n        .innerText.charAt(0)\n        .toLowerCase();\n      if (char === thisChar) {\n        return i;\n      }\n    }\n    return -1;\n  }\n\n  _getLinkByFirstCharacter(pressedKey) {\n    const thisButton = this._thisButton();\n    let wasBtn = thisButton.shadowRoot.activeElement;\n    if (wasBtn) {\n      return;\n    }\n\n    const char = pressedKey.toLowerCase();\n    const links = this._allLinks();\n    const thisMenu = this._thisMenu();\n    let focused = thisMenu.shadowRoot.activeElement;\n    let start = links.findIndex(link => link === focused.parentElement) + 1;\n    let newIndex;\n\n    if (start === links.length) {\n      start = 0;\n    }\n\n    // Check remaining slots in the menu\n    newIndex = this._getIndexFirstChars(start, char);\n\n    // If not found in remaining slots, check from beginning\n    if (newIndex === -1) {\n      newIndex = this._getIndexFirstChars(0, char);\n    }\n\n    // If match was found...\n    if (newIndex > -1) {\n      return links[newIndex];\n    } else {\n      return -1;\n    }\n  }\n\n  _previousLink() {\n    const links = this._allLinks();\n    const thisMenu = this._thisMenu();\n    const thisButton = this._thisButton();\n    let focused = thisMenu.shadowRoot.activeElement;\n    let wasBtn = thisButton.shadowRoot.activeElement;\n    let newIndex;\n\n    if (!focused && wasBtn) {\n      // Handles tabbing off menu and back into menu.\n      newIndex = links.length - 1;\n    } else {\n      // I'm already inside the menu\n      newIndex = links.findIndex(link => link === focused.parentElement) - 1;\n    }\n\n    return links[(newIndex + links.length) % links.length];\n  }\n\n  _nextLink() {\n    const links = this._allLinks();\n    const thisMenu = this._thisMenu();\n    const thisButton = this._thisButton();\n    let focused = thisMenu.shadowRoot.activeElement;\n    let wasBtn = thisButton.shadowRoot.activeElement;\n    let newIndex;\n\n    if (!focused && wasBtn) {\n      // Handles tabbing off menu and back into menu.\n      newIndex = 0;\n    } else {\n      // I'm already inside the menu\n      newIndex = links.findIndex(link => link === focused.parentElement) + 1;\n    }\n\n    return links[newIndex % links.length];\n  }\n\n  _firstLink() {\n    const links = this._allLinks();\n    return links[0];\n  }\n\n  _lastLink() {\n    const links = this._allLinks();\n    return links[links.length - 1];\n  }\n}\n\nRHElement.create(RhDropdown);\n"],"names":[],"mappings":"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"}