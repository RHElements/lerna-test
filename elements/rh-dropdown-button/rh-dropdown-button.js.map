{"version":3,"file":"rh-dropdown-button.js","sources":["rh-dropdown-button.js"],"sourcesContent":["/*\n * Copyright 2018 Red Hat, Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\nimport RHElement from \"../rhelement/rhelement.js\";\n\nclass RhDropdownButton extends RHElement {\n  get html() {\n    return `\n<style>\n:host *, :host *::before, :host *::after {\n  box-sizing: border-box; }\n\n:host button {\n  padding: 0.5rem 1rem;\n  border: 1px solid #ccc;\n  background: transparent;\n  font-size: 16px;\n  line-height: 1.5;\n  color: #333;\n  cursor: pointer; }\n  :host button::after {\n    content: '';\n    display: inline-block;\n    margin-left: 0.5rem;\n    border-top: 5px solid #333;\n    border-left: 5px solid transparent;\n    border-right: 5px solid transparent;\n    vertical-align: middle; }\n  :host button:hover, :host button:focus {\n    background: #e7e7e7; }\n  :host button[aria-expanded=\"true\"] {\n    color: #fff;\n    background: #004080;\n    border-color: #004080; }\n    :host button[aria-expanded=\"true\"]::after {\n      border-bottom: 5px solid #fff;\n      border-top: 0; }\n</style>\n<button></button>`;\n  }\n\n  static get tag() {\n    return \"rh-dropdown-button\";\n  }\n\n  get styleUrl() {\n    return \"rh-dropdown-button.scss\";\n  }\n\n  get templateUrl() {\n    return \"rh-dropdown-button.html\";\n  }\n\n  static get observedAttributes() {\n    return [\"no-aria-haspopup\"];\n  }\n\n  constructor() {\n    super(RhDropdownButton.tag);\n    this.button = this.shadowRoot.querySelector(\"button\");\n    this._clickHandler = this._clickHandler.bind(this);\n  }\n\n  connectedCallback() {\n    const child = this.children[0];\n    let isHeadingTag = false;\n\n    if (child) {\n      switch (child.tagName) {\n        case \"H1\":\n        case \"H2\":\n        case \"H3\":\n        case \"H4\":\n        case \"H5\":\n        case \"H6\":\n          isHeadingTag = true;\n          break;\n      }\n      this.button.innerHTML = child.innerHTML;\n    } else {\n      this.button.innerHTML = this.textContent.trim();\n    }\n\n    if (!isHeadingTag) {\n      console.warn(\n        \"The first child in the light DOM must be a heading level tag (h1, h2, h3, h4, h5, or h6)\"\n      );\n    }\n\n    if (!this.getAttribute(\"no-aria-haspopup\")) {\n      this.button.setAttribute(\"aria-haspopup\", \"true\");\n    }\n\n    this.button.setAttribute(\"aria-expanded\", \"false\");\n\n    this.button.addEventListener(\"click\", this._clickHandler);\n  }\n\n  disconnectedCallback() {\n    this.button.removeEventListener(\"click\", this._clickHandler);\n  }\n\n  attributeChangedCallback(attr, oldVal, newVal) {\n    if (attr === \"no-aria-haspopup\" && newVal === \"true\") {\n      this.button.removeAttribute(\"aria-haspopup\");\n    } else {\n      this.button.setAttribute(\"aria-haspopup\", \"true\");\n    }\n  }\n\n  get expanded() {\n    return this.hasAttribute(\"data-expanded\");\n  }\n\n  set expanded(val) {\n    val = Boolean(val);\n\n    if (val) {\n      this.setAttribute(\"data-expanded\", true);\n      this.button.setAttribute(\"aria-expanded\", true);\n    } else {\n      this.removeAttribute(\"data-expanded\");\n      this.button.setAttribute(\"aria-expanded\", false);\n    }\n  }\n\n  _clickHandler(event) {\n    this.dispatchEvent(\n      new CustomEvent(\"rh-dropdown-change\", {\n        detail: { expanded: !this.expanded },\n        bubbles: true\n      })\n    );\n  }\n}\n\nRHElement.create(RhDropdownButton);\n"],"names":[],"mappings":"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"}