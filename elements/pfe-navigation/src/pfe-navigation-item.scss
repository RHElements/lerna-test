@import "../../pfe-sass/pfe-sass";

$LOCAL: navigation-item;

/// ===========================================================================
/// Component Specific SASS Vars
/// ===========================================================================
$pfe-nav-size: 4em;

/// ===========================================================================
/// DEFAULT navigation-item
/// ===========================================================================
:host {
	// Fill the navigation container
	height: 100%;
	// Update the navigation padding in this context
	--pfe-navigation-item--Padding--vertical:   #{pfe-var(container-spacer)};
	--pfe-navigation-item--Padding--horizontal: #{pfe-var(container-spacer)};

	--pfe-navigation-item__tray--Width__aside--sm: 240px;
	--pfe-navigation-item__tray--Width__aside--lg: 300px;

	--pfe-navigation-item--Color: 			#{pfe-local(main)};
	--pfe-navigation-item--BackgroundColor: #{pfe-local(aux)};
	--pfe-navigation-item--BorderTopColor:	transparent;

	font-family: #{pfe-var(font-family)};

	/// ===========================================================================
	/// MOBILE
	/// ===========================================================================
	@media (max-width: #{pfe-breakpoint(lg-max)} ) {
	    display: inline-block;
	}

	/// ===========================================================================
	/// DESKTOP
	/// ===========================================================================
    @media (min-width: #{pfe-breakpoint(lg)}) {
	    --pfe-navigation-item--main:        #{pfe-color(text)};              // text
	    --pfe-navigation-item--main--hover: #{pfe-color(text--on-dark)};     // text hover
  
	    --pfe-navigation-item--aux:         transparent;                     // bg
	    --pfe-navigation-item--aux--hover:  #{pfe-color(surface--darkest)};  // bg hover
  
	    font-weight: bold;
	    font-weight: 300;
	    min-height:  #{$pfe-nav-size};
	    display: flex;
	    flex-direction: column;
	    align-items: center;
	    justify-content: center;
    }
}

::slotted(a) {
    @media (max-width: #{pfe-breakpoint(lg, $max: true)}) {
		@include pfe-trigger-button;
		@include pfe-trigger-expanded;
		text-decoration: none;
    }
}

.pfe-navigation-item {

	&__tray {
		@media (max-width: #{pfe-breakpoint(lg, $max: true)}) {
			@include pfe-accordion-panel-expanded;
		}
		@media (min-width: #{pfe-breakpoint(lg)}) {
			display: block;
			background-color: #{pfe-color(surface--lightest)};
			position: absolute;
			top: var(--pfe-navigation--Height, 70px); // @TODO Need to do this with JS
			left: 0;
			width: 100%;
			z-index: 1;
			transition: all #{pfe-var(animation-timing)};
		}

		&[hidden] {
			display: none;
		}
		&--main {
			flex-grow: 1;
		}
		&--aside {
			width: 240px;
		}
		&--footer {
			width: 100%;
			border-top: 1px solid gray;
			padding-top: 10px;
		}
	}
	&__container {
		@media (max-width: #{pfe-breakpoint(lg, $max: true)}) {
			@include pfe-accordion-panel-container;
		}
		@media (min-width: #{pfe-breakpoint(lg)}) {
			display: 		flex;
			flex-flow:  row wrap;
			margin:    	10px auto;
			width: 			var(--pfe-navigation--Width);
		}
	}
	&__trigger {
		text-decoration: none;
		@media (max-width: #{pfe-breakpoint(lg, $max: true)}) {
			@include pfe-trigger-button;
			@include pfe-trigger-expanded;

			&[aria-expanded="false"]::after {
				@include pfe-chevron-expanded-false;
			}
			&[aria-expanded="true"]::after {
				@include pfe-chevron-expanded-true;
			}
		}
		@media (min-width: #{pfe-breakpoint(lg)}) {
			flex: 1;
			display:			flex;
			flex-direction: 	column;
			align-items: 		center;
			justify-content: 	center;
			padding: 0 3px;
			// Fill the navigation container
			height: 			100%;
			cursor: 			pointer;
			text-decoration: 	none;
			border-top:       #{pfe-local(BorderTopColor)} solid 2px;
			color:            #{pfe-local(Color)}; //text
			background-color: #{pfe-local(BackgroundColor)};  //bg
			line-height: 			#{$pfe-nav-size};
		}

	  &:hover {
			--pfe-navigation-item--Color:			#{pfe-local(main--hover)};
			--pfe-navigation-item--BackgroundColor: #{pfe-local(aux--hover)};
			--pfe-navigation-item--BorderTopColor:  #{pfe-color(surface--accent)};
	  }
	  &:active {
			--pfe-navigation-item--Color:			#{pfe-local(main--hover)};
			--pfe-navigation-item--BackgroundColor: #{pfe-local(aux--hover)};
			--pfe-navigation-item--BorderTopColor:  #{pfe-color(surface--accent)};
	  }
	  &:focus {
			--pfe-navigation-item--Color: 			#{pfe-local(main--hover)};
			--pfe-navigation-item--BackgroundColor: #{pfe-local(aux--hover)};
			--pfe-navigation-item--BorderTopColor:  #{pfe-color(surface--accent)};
	  	&:not(:focus-visible) {
	  		outline: none; // removes outline for mouse users, preserves it for keyboard users
	  	}
	  }
	}

	&__icon {
		@media (min-width: #{pfe-breakpoint(lg)}) {
			padding: 0 0 10px 0;
			display: block;
			width: 	20px;

			[pfe-icon="bento"] & #Icon {
				-webkit-text-fill-color: 	 #{pfe-local(Color)};
				fill: 	#{pfe-local(Color)};
			}
			[pfe-icon="menu"] & #Icon {
				-webkit-text-stroke-color: #{pfe-local(Color)};
				-webkit-text-fill-color: 	 #{pfe-local(Color)};
				stroke: #{pfe-local(Color)};
				fill: 	#{pfe-local(Color)};
			}
			[pfe-icon="user"] & #Icon,
			[pfe-icon="globe"] & #Icon,
			[pfe-icon="search"] & #Icon {
				-webkit-text-stroke-color: #{pfe-local(Color)};
				stroke: #{pfe-local(Color)};
			}
		}
	}
	&__text {	
		transition: all #{pfe-var(animation-timing)};

		@media (max-width: #{pfe-breakpoint(lg, $max: true)}) {
		  @include pfe-trigger-expanded;
		  text-decoration: none;
		}
		@media (min-width: #{pfe-breakpoint(lg)}) {
			font-size: 0.9em;
			margin: 0;
			color:  inherit; 
			line-height: 1.2;
			padding: 0 #{pfe-local(Padding--horizontal)};
		}
	}

	// Placeholder styles for direct link items
	&__link {}
}
//shrink the text size of nav items with icons
[pfe-icon] .pfe-navigation-item__text {
	font-size: 0.8em;
	//padding: calc(#{pfe-local(Padding--vertical)} * 0.5) #{pfe-local(Padding--horizontal)}#{pfe-local(Padding--vertical)};
}



/// ===========================================================================
/// ON DARK
/// ===========================================================================
:host([on="dark"]) {
	@media (min-width: #{pfe-breakpoint(lg)}) {
		--pfe-navigation-item--main:        #{pfe-color(text--on-dark)};      // text
		--pfe-navigation-item--main--hover: #{pfe-color(text)};               // text hover

		--pfe-navigation-item--aux:         transparent;                      // bg
		--pfe-navigation-item--aux--hover:  #{pfe-color(surface--lightest)};  // bg hover
	}
}

:host([hidden]) {
	display: none;
}
